import { 
  createDocPage, 
  createExampleCard, 
  createPropsTable, 
  createUsageSection 
} from '../_helpers/docTemplate.js';

/**
 * EditProfileStudentNew - Modal de Edi√ß√£o de Perfil de Aluno
 * =============================================================
 * Modal para editar informa√ß√µes do aluno (senha e avatar/mascote) usado pelo respons√°vel
 * na tela de gerenciamento de contas (ManageAccount).
 */

export default {
  title: 'Front-office/Modals/EditProfileStudentNew',
  parameters: {
    layout: 'fullscreen',
    previewTabs: {
      canvas: { hidden: true },
    },
    viewMode: 'docs',
    docs: {
      story: {
        inline: true,
        iframeHeight: 0,
      },
      canvas: {
        sourceState: 'none',
      },
    },
    controls: {
      disable: true,
    },
    actions: {
      disable: true,
    },
    toolbar: {
      zoom: { hidden: true },
      eject: { hidden: true },
      copy: { hidden: true },
    },
  }
};

const styles = `<style>
* { box-sizing: border-box; margin: 0; padding: 0; }

/* Bootstrap Modal Base Styles */
.modal {
  position: fixed;
  top: 0;
  left: 0;
  z-index: 1055;
  display: block;
  width: 100%;
  height: 100%;
  overflow-x: hidden;
  overflow-y: auto;
  outline: 0;
}

.modal-backdrop {
  position: fixed;
  top: 0;
  left: 0;
  z-index: 1050;
  width: 100vw;
  height: 100vh;
  background-color: #000;
  opacity: 0.5;
}

.modal-dialog {
  position: relative;
  width: auto;
  margin: 1.75rem auto;
  pointer-events: none;
  max-width: 800px;
}

.modal-dialog-centered {
  display: flex;
  align-items: center;
  min-height: calc(100% - 3.5rem);
}

.modal-content {
  position: relative;
  display: flex;
  flex-direction: column;
  width: 100%;
  pointer-events: auto;
  background-color: #fff;
  background-clip: padding-box;
  border: 1px solid rgba(0, 0, 0, 0.2);
  border-radius: 0.428rem;
  outline: 0;
  box-shadow: 0 0.25rem 0.5rem rgba(0, 0, 0, 0.5);
}

.modal-header {
  display: flex;
  flex-shrink: 0;
  align-items: center;
  justify-content: space-between;
  padding: 1.5rem;
  border-bottom: 1px solid #EBE9F1;
  border-top-left-radius: 0.428rem;
  border-top-right-radius: 0.428rem;
}

.modal-title {
  margin-bottom: 0;
  line-height: 1.5;
  font-size: 1.285rem;
  font-weight: 600;
  color: #5E5873;
}

.btn-close {
  padding: 0.25rem 0.25rem;
  margin: -0.5rem -0.5rem -0.5rem auto;
  background: transparent;
  border: 0;
  border-radius: 0.285rem;
  opacity: 0.5;
  cursor: pointer;
  width: 1em;
  height: 1em;
  box-sizing: content-box;
}

.btn-close:hover {
  opacity: 0.75;
}

.btn-close::before {
  content: '√ó';
  font-size: 2rem;
  line-height: 1;
  color: #000;
}

.modal-body {
  position: relative;
  flex: 1 1 auto;
  padding: 1.5rem;
}

/* Component Specific Styles (from EditProfileStudentsNew.vue) */

/* Component Specific Styles (from EditProfileStudentsNew.vue) */
.list-pets {
  width: 210px;
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 6px;
}

.pet-container {
  border: 2px solid transparent;
  width: 52px;
  height: 52px;
  border-radius: 6px;
  opacity: 0.7;
  cursor: pointer;
  transition: all 0.2s ease;
}

.pet-container:hover {
  opacity: 0.85;
}

.pet-container.selected {
  opacity: 1;
  border-color: #7367F0;
}

.pet-img-container {
  border-radius: 4px;
  width: 44px;
  height: 44px;
  margin: 2px;
  display: flex;
  justify-content: center;
  align-items: center;
}

.pet-img-container img {
  max-width: 90%;
  max-height: 90%;
}

.pet-img-selected-container {
  border-radius: 4px;
  width: 202px;
  height: 202px;
  margin-bottom: 4px;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}

.pet-img-selected-container img {
  max-width: 70%;
  max-height: 70%;
  object-fit: contain;
}

/* Layout */
.edit-container {
  display: grid;
  grid-template-columns: 210px 1fr;
  gap: 2rem;
}

.avatar-section {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.form-section {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.form-label {
  font-size: 0.857rem;
  font-weight: 500;
  color: #5E5873;
}

.form-control {
  padding: 0.714rem 1rem;
  border: 1px solid #D8D6DE;
  border-radius: 0.428rem;
  font-size: 1rem;
  color: #5E5873;
  transition: border-color 0.2s ease;
}

.form-control:focus {
  outline: none;
  border-color: #7367F0;
  box-shadow: 0 3px 10px 0 rgba(115, 103, 240, 0.1);
}

.form-control:disabled {
  background: #EFEFEF;
  cursor: not-allowed;
  opacity: 0.7;
}

.input-group {
  position: relative;
  display: flex;
}

.input-group .form-control {
  border-right: none;
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
}

.input-group-append {
  display: flex;
  align-items: center;
  padding: 0 0.714rem;
  background: #fff;
  border: 1px solid #D8D6DE;
  border-left: none;
  border-top-right-radius: 0.428rem;
  border-bottom-right-radius: 0.428rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.input-group:focus-within .input-group-append {
  border-color: #7367F0;
}

.input-group-append:hover {
  background: #F8F8F8;
}

.input-group-append .material-symbols-outlined {
  font-size: 20px;
  color: #6E6B7B;
}

.text-danger {
  color: #EA5455;
  font-size: 0.857rem;
  margin-top: 0.25rem;
}

.actions-container {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0.75rem;
  margin-top: 1.5rem;
}

.btn {
  padding: 0.714rem 1.5rem;
  border-radius: 0.428rem;
  font-size: 1rem;
  font-weight: 500;
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

.btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.btn-outline-danger {
  background: transparent;
  border: 1px solid #EA5455;
  color: #EA5455;
}

.btn-outline-danger:hover:not(:disabled) {
  background: #EA5455;
  color: #fff;
  box-shadow: 0 8px 25px -8px #EA5455;
}

.btn-primary {
  background: #7367F0;
  color: #fff;
}

.btn-primary:hover:not(:disabled) {
  background: #5E50EE;
  box-shadow: 0 8px 25px -8px #7367F0;
}

.spinner {
  width: 14px;
  height: 14px;
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-top-color: #fff;
  border-radius: 50%;
  animation: spin 0.6s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(255, 255, 255, 0.9);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
  border-radius: 0.428rem;
}

.overlay .spinner {
  width: 40px;
  height: 40px;
  border-width: 4px;
  border-color: rgba(115, 103, 240, 0.2);
  border-top-color: #7367F0;
}

@media (max-width: 768px) {
  .edit-container {
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }
  
  .actions-container {
    grid-template-columns: 1fr;
  }
}
</style>`;

// Mascotes Educacross originais (corujinhas PNG)
const mascotImages = {
  1: '<img src="/profile-corujinhas/1.png" alt="Corujinha 1" style="max-width: 90%; max-height: 90%;">',
  2: '<img src="/profile-corujinhas/2.png" alt="Corujinha 2" style="max-width: 90%; max-height: 90%;">',
  3: '<img src="/profile-corujinhas/3.png" alt="Corujinha 3" style="max-width: 90%; max-height: 90%;">',
  4: '<img src="/profile-corujinhas/4.png" alt="Corujinha 4" style="max-width: 90%; max-height: 90%;">',
  5: '<img src="/profile-corujinhas/5.png" alt="Corujinha 5" style="max-width: 90%; max-height: 90%;">',
  6: '<img src="/profile-corujinhas/6.png" alt="Corujinha 6" style="max-width: 90%; max-height: 90%;">',
  7: '<img src="/profile-corujinhas/7.png" alt="Corujinha 7" style="max-width: 90%; max-height: 90%;">',
  8: '<img src="/profile-corujinhas/8.png" alt="Corujinha 8" style="max-width: 90%; max-height: 90%;">',
};

const generateMascotGrid = (selectedId) => {
  return [1, 2, 3, 4, 5, 6, 7, 8].map(id => `
    <div class="pet-container ${id === selectedId ? 'selected' : ''}" data-mascot="${id}">
      <div class="pet-img-container" style="background-color: #5AC4FF;">
        ${mascotImages[id]}
      </div>
    </div>
  `).join('');
};

// Documenta√ß√£o principal
export const Documentation = {
  render: () => createDocPage({
    title: 'EditProfileStudentNew',
    subtitle: 'Modal para edi√ß√£o de perfil do aluno com sele√ß√£o de mascote e altera√ß√£o de senha',
    badge: 'Front-office / Modals',
    badgeIcon: 'person_edit',
    showStats: true,
    stats: {
      'Layout': '2-colunas',
      'Mascotes': '9',
      'Campos': '3'
    },
    colors: {
      primary: '#6e63e8',
      secondary: '#5AC4FF'
    },
    content: `
      ${createUsageSection({
        title: 'Contexto de Uso',
        icon: 'info',
        steps: [
          'Respons√°vel acessa √°rea "Gerenciar Contas"',
          'Clica em "Editar" no perfil do aluno/filho',
          'Modal abre com dados atuais do aluno',
          'Pode alterar senha e selecionar novo mascote',
          'Salva altera√ß√µes e recebe feedback de sucesso'
        ]
      })}

      ${createExampleCard({
        title: 'Estado Padr√£o',
        description: 'Layout 2-colunas com avatar e formul√°rio de edi√ß√£o',
        showTitle: true,
        wrapPreview: false,
        preview: `\n          ` + styles + `
          <div style="display: flex; justify-content: center; padding: 2rem; background: rgba(0,0,0,0.5);">
            <div class="modal-content">
              <div class="modal-header">
                <h4 class="modal-title">Editar Aluno</h4>
                <button type="button" class="btn-close"></button>
              </div>
              
              <div class="modal-body">
                <div class="edit-container">
                  <div class="avatar-section">
                    <div class="pet-img-selected-container" style="background-color: #5AC4FF;">
                      <img src="/images/teacher-context/school-context/owl-avatars/owl-01.png" alt="Mascote selecionado" />
                    </div>
                    
                    <div class="pet-grid">
                      \${createMascotGrid('0')}
                    </div>
                  </div>
                  
                  <div class="form-section">
                    <div class="form-group">
                      <label class="form-label">Nome completo</label>
                      <input type="text" class="form-control" value="Jo√£o Silva Santos" disabled />
                    </div>
                    
                    <div class="form-group">
                      <label class="form-label">Usu√°rio</label>
                      <input type="text" class="form-control" value="joao.silva" disabled />
                    </div>
                    
                    <div class="form-group">
                      <label class="form-label">Senha</label>
                      <div class="password-input-group">
                        <input type="password" class="form-control" placeholder="Digite a nova senha" />
                        <button type="button" class="password-toggle">
                          <i class="bi bi-eye"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="modal-footer">
                <button type="button" class="btn btn-outline-danger">Cancelar</button>
                <button type="button" class="btn btn-primary">Salvar altera√ß√µes</button>
              </div>
            </div>
          </div>
        \`,
        codes: {
          html: \`<!-- Modal de Edi√ß√£o de Perfil -->
<div class="modal-overlay">
  <div class="modal-content">
    <div class="modal-header">
      <h4>Editar Aluno</h4>
      <button type="button" class="btn-close"></button>
    </div>
    
    <div class="modal-body">
      <div class="edit-container">
        <!-- Se√ß√£o Avatar -->
        <div class="avatar-section">
          <div class="avatar-preview">
            <img src="/avatar.png" alt="Avatar selecionado" />
          </div>
          <div class="mascot-grid">
            <!-- 9 mascotes 3x3 -->
          </div>
        </div>
        
        <!-- Se√ß√£o Formul√°rio -->
        <div class="form-section">
          <div class="form-group">
            <label>Nome completo</label>
            <input type="text" disabled />
          </div>
          <div class="form-group">
            <label>Usu√°rio</label>
            <input type="text" disabled />
          </div>
          <div class="form-group">
            <label>Senha</label>
            <div class="password-group">
              <input type="password" />
              <button class="toggle-visibility"></button>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="modal-footer">
      <button class="btn-cancel">Cancelar</button>
      <button class="btn-save">Salvar</button>
    </div>
  </div>
</div>\`,
          react: \`import { useState } from 'react'

function EditProfileModal({ student, isOpen, onSave, onCancel }) {
  const [selectedMascot, setSelectedMascot] = useState(student.mascotId)
  const [password, setPassword] = useState('')
  const [showPassword, setShowPassword] = useState(false)
  const [loading, setLoading] = useState(false)

  const handleSave = async () => {
    setLoading(true)
    try {
      await onSave({
        mascotId: selectedMascot,
        password: password
      })
    } finally {
      setLoading(false)
    }
  }

  if (!isOpen) return null

  return (
    <div className="modal-overlay">
      <div className="modal-content">
        <div className="modal-header">
          <h4>Editar Aluno</h4>
          <button onClick={onCancel}>√ó</button>
        </div>
        
        <div className="modal-body">
          <div className="edit-container">
            <div className="avatar-section">
              <div className="avatar-preview">
                <img src={\`/mascots/\" + selectedMascot + ".png\`} />
              </div>
              <div className="mascot-grid">
                {mascots.map(id => (
                  <button 
                    key={id}
                    className={\`mascot \" + selectedMascot === id ? 'selected' : '' + "\`}
                    onClick={() => setSelectedMascot(id)}
                  >
                    <img src={\`/mascots/\" + id + ".png\`} />
                  </button>
                ))}
              </div>
            </div>
            
            <div className="form-section">
              <div>
                <label>Nome completo</label>
                <input value={student.fullName} disabled />
              </div>
              <div>
                <label>Usu√°rio</label>
                <input value={student.username} disabled />
              </div>
              <div>
                <label>Senha</label>
                <div className="password-group">
                  <input 
                    type={showPassword ? 'text' : 'password'}
                    value={password}
                    onChange={e => setPassword(e.target.value)}
                  />
                  <button onClick={() => setShowPassword(!showPassword)}>
                    {showPassword ? 'üëÅÔ∏è' : 'üëÅÔ∏è‚Äçüó®Ô∏è'}
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div className="modal-footer">
          <button onClick={onCancel}>Cancelar</button>
          <button onClick={handleSave} disabled={loading}>
            {loading ? 'Salvando...' : 'Salvar'}
          </button>
        </div>
      </div>
    </div>
  )
}\`,
          vue2: \`<template>
  <b-modal 
    v-model="visible"
    title="Editar Aluno"
    size="lg"
    hide-footer
    @hidden="$emit('cancel')"
  >
    <div class="edit-container">
      <div class="avatar-section">
        <div class="avatar-preview" :style="{ backgroundColor: mascotColors[selectedMascot] }">
          <img :src="\`/mascots/\" + selectedMascot + ".png\`" />
        </div>
        
        <div class="mascot-grid">
          <button
            v-for="mascot in mascots"
            :key="mascot.id"
            :class="['mascot-btn', { selected: selectedMascot === mascot.id }]"
            @click="selectedMascot = mascot.id"
          >
            <img :src="mascot.image" />
          </button>
        </div>
      </div>
      
      <div class="form-section">
        <b-form-group label="Nome completo">
          <b-form-input :value="student.fullName" disabled />
        </b-form-group>
        
        <b-form-group label="Usu√°rio">
          <b-form-input :value="student.username" disabled />
        </b-form-group>
        
        <b-form-group label="Senha">
          <b-input-group>
            <b-form-input 
              v-model="password"
              :type="showPassword ? 'text' : 'password'"
            />
            <b-input-group-append>
              <b-button @click="showPassword = !showPassword">
                <i :class="showPassword ? 'bi-eye-slash' : 'bi-eye'" />
              </b-button>
            </b-input-group-append>
          </b-input-group>
        </b-form-group>
      </div>
    </div>
    
    <div class="modal-footer">
      <b-button variant="outline-danger" @click="$emit('cancel')">
        Cancelar
      </b-button>
      <b-button 
        variant="primary" 
        :disabled="loading || !password"
        @click="handleSave"
      >
        <b-spinner v-if="loading" small />
        Salvar altera√ß√µes
      </b-button>
    </div>
  </b-modal>
</template>

<script>
export default {
  props: {
    visible: Boolean,
    student: Object
  },
  data() {
    return {
      selectedMascot: this.student?.mascotId || '0',
      password: '',
      showPassword: false,
      loading: false
    }
  },
  methods: {
    async handleSave() {
      this.loading = true
      try {
        await this.$emit('save', {
          mascotId: this.selectedMascot,
          password: this.password
        })
      } finally {
        this.loading = false
      }
    }
  }
}
</script>\`
        }
      })}

      ${createExampleCard({
        title: 'Estado de Loading',
        description: 'Modal com overlay de carregamento durante busca de dados',
        showTitle: true,
        wrapPreview: false,
        preview: `\n          ` + styles + `
          <div style="display: flex; justify-content: center; padding: 2rem; background: rgba(0,0,0,0.5);">
            <div class="modal-content">
              <div class="modal-header">
                <h4 class="modal-title">Editar Aluno</h4>
                <button type="button" class="btn-close"></button>
              </div>
              
              <div class="modal-body" style="position: relative;">
                <div class="loading-overlay">
                  <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Carregando...</span>
                  </div>
                </div>
                
                <div class="edit-container" style="opacity: 0.3;">
                  <div class="avatar-section">
                    <div class="pet-img-selected-container" style="background-color: #ddd;"></div>
                    <div class="pet-grid">
                      <!-- Grid placeholder -->
                    </div>
                  </div>
                  <div class="form-section">
                    <!-- Form placeholder -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        \`,
        codes: {
          html: \`<div class="loading-overlay">
  <div class="spinner"></div>
</div>\`,
          react: \`{loading && (
  <div className="loading-overlay">
    <div className="spinner" />
  </div>
)}\`,
          vue2: \`<div v-if="loading" class="loading-overlay">
  <b-spinner />
</div>\`
        }
      })}

      ${createExampleCard({
        title: 'Estado de Salvando',
        description: 'Bot√£o com spinner durante processamento do salvamento',
        showTitle: true,
        wrapPreview: false,
        preview: `\n          ` + styles + `
          <div style="display: flex; justify-content: center; padding: 2rem; background: rgba(0,0,0,0.5);">
            <div class="modal-content">
              <div class="modal-header">
                <h4 class="modal-title">Editar Aluno</h4>
                <button type="button" class="btn-close"></button>
              </div>
              
              <div class="modal-body">
                <div class="edit-container">
                  <div class="avatar-section">
                    <div class="pet-img-selected-container" style="background-color: #FF6B35;">
                      <img src="/images/teacher-context/school-context/owl-avatars/owl-04.png" alt="Mascote selecionado" />
                    </div>
                    <div class="pet-grid">
                      \${createMascotGrid('4')}
                    </div>
                  </div>
                  
                  <div class="form-section">
                    <div class="form-group">
                      <label class="form-label">Nome completo</label>
                      <input type="text" class="form-control" value="Maria Oliveira" disabled />
                    </div>
                    <div class="form-group">
                      <label class="form-label">Usu√°rio</label>
                      <input type="text" class="form-control" value="maria.oliveira" disabled />
                    </div>
                    <div class="form-group">
                      <label class="form-label">Senha</label>
                      <div class="password-input-group">
                        <input type="password" class="form-control" value="novasenha123" />
                        <button type="button" class="password-toggle">
                          <i class="bi bi-eye-slash"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="modal-footer">
                <button type="button" class="btn btn-outline-danger" disabled>Cancelar</button>
                <button type="button" class="btn btn-primary" disabled>
                  <span class="spinner-border spinner-border-sm me-2" role="status"></span>
                  Salvando...
                </button>
              </div>
            </div>
          </div>
        \`,
        codes: {
          html: \`<button class="btn-save" disabled>
  <span class="spinner-sm"></span>
  Salvando...
</button>\`,
          react: \`<button disabled={loading}>
  {loading && <span className="spinner" />}
  {loading ? 'Salvando...' : 'Salvar'}
</button>\`,
          vue2: \`<b-button :disabled="loading">
  <b-spinner v-if="loading" small />
  {{ loading ? 'Salvando...' : 'Salvar' }}
</b-button>\`
        }
      })}

      ${createPropsTable([
        {
          prop: 'student',
          type: 'Object',
          default: '{}',
          description: 'Dados do aluno a ser editado. Deve conter { id, fullName, username, mascotId }'
        },
        {
          prop: 'visible',
          type: 'Boolean',
          default: 'false',
          description: 'Controla a visibilidade do modal'
        },
        {
          prop: 'loading',
          type: 'Boolean',
          default: 'false',
          description: 'Estado de carregamento inicial dos dados'
        }
      ])}

      <div class="doc-section">
        <h3 class="doc-section-title">
          <span class="material-symbols-outlined">tune</span>
          <span>Estados do Modal</span>
        </h3>
        <div style="display: flex; flex-wrap: wrap; gap: 1rem; margin: 1.5rem 0;">
          <div style="flex: 1; min-width: 240px; border: 1px solid #e5e3f3; padding: 1rem; border-radius: 8px; background: #f0f9ff;">
            <h4 style="color: #6e63e8; margin: 0 0 0.5rem 0;">1. Loading</h4>
            <p style="font-size: 0.875rem; color: #6e6b7b; margin: 0;">Overlay de carregamento durante busca dos dados do aluno</p>
          </div>
          <div style="flex: 1; min-width: 240px; border: 1px solid #e5e3f3; padding: 1rem; border-radius: 8px; background: #f8f9fa;">
            <h4 style="color: #5e5873; margin: 0 0 0.5rem 0;">2. Edi√ß√£o</h4>
            <p style="font-size: 0.875rem; color: #6e6b7b; margin: 0;">Formul√°rio ativo com sele√ß√£o de mascote e campos edit√°veis</p>
          </div>
          <div style="flex: 1; min-width: 240px; border: 1px solid #e5e3f3; padding: 1rem; border-radius: 8px; background: #fff9f5;">
            <h4 style="color: #ff9f43; margin: 0 0 0.5rem 0;">3. Salvando</h4>
            <p style="font-size: 0.875rem; color: #6e6b7b; margin: 0;">Bot√µes desabilitados, spinner durante processamento</p>
          </div>
        </div>
      </div>

      <div class="doc-section">
        <h3 class="doc-section-title">
          <span class="material-symbols-outlined">rule</span>
          <span>Regras de Neg√≥cio</span>
        </h3>
        <ul style="margin: 1rem 0; padding-left: 1.5rem;">
          <li style="margin-bottom: 0.5rem;"><strong>Campos protegidos:</strong> Nome e usu√°rio n√£o podem ser editados</li>
          <li style="margin-bottom: 0.5rem;"><strong>Valida√ß√£o de senha:</strong> Campo obrigat√≥rio para salvar altera√ß√µes</li>
          <li style="margin-bottom: 0.5rem;"><strong>Sele√ß√£o visual:</strong> Mascote selecionado tem border azul destacado</li>
          <li style="margin-bottom: 0.5rem;"><strong>Preview instant√¢neo:</strong> Avatar atualiza ao clicar em mascote</li>
          <li style="margin-bottom: 0.5rem;"><strong>Estados mutuamente exclusivos:</strong> Loading, edi√ß√£o ou salvando</li>
        </ul>
      </div>

      <div class="doc-section">
        <h3 class="doc-section-title">
          <span class="material-symbols-outlined">palette</span>
          <span>Especifica√ß√µes Visuais</span>
        </h3>
        <div style="display: flex; flex-wrap: wrap; gap: 1rem; margin: 1.5rem 0;">
          <div style="flex: 1; min-width: 140px; border: 1px solid #e5e3f3; padding: 1rem; border-radius: 8px; background: #fbfaff;">
            <div style="font-size: 0.75rem; color: #6e6b7b; text-transform: uppercase; font-weight: 600; margin-bottom: 0.5rem;">Layout</div>
            <div style="font-size: 1.25rem; font-weight: 700; color: #2f2b3d;">2-colunas</div>
          </div>
          <div style="flex: 1; min-width: 140px; border: 1px solid #e5e3f3; padding: 1rem; border-radius: 8px; background: #fbfaff;">
            <div style="font-size: 0.75rem; color: #6e6b7b; text-transform: uppercase; font-weight: 600; margin-bottom: 0.5rem;">Avatar Preview</div>
            <div style="font-size: 1.25rem; font-weight: 700; color: #2f2b3d;">202√ó202px</div>
          </div>
          <div style="flex: 1; min-width: 140px; border: 1px solid #e5e3f3; padding: 1rem; border-radius: 8px; background: #fbfaff;">
            <div style="font-size: 0.75rem; color: #6e6b7b; text-transform: uppercase; font-weight: 600; margin-bottom: 0.5rem;">Grid Mascotes</div>
            <div style="font-size: 1.25rem; font-weight: 700; color: #2f2b3d;">3√ó3 (44px)</div>
          </div>
          <div style="flex: 1; min-width: 140px; border: 1px solid #e5e3f3; padding: 1rem; border-radius: 8px; background: #fbfaff;">
            <div style="font-size: 0.75rem; color: #6e6b7b; text-transform: uppercase; font-weight: 600; margin-bottom: 0.5rem;">Gap Layout</div>
            <div style="font-size: 1.25rem; font-weight: 700; color: #2f2b3d;">2rem</div>
          </div>
          <div style="flex: 1; min-width: 140px; border: 1px solid #5AC4FF; padding: 1rem; border-radius: 8px; background: #f0f9ff;">
            <div style="font-size: 0.75rem; color: #5AC4FF; text-transform: uppercase; font-weight: 600; margin-bottom: 0.5rem;">Cor Avatar</div>
            <div style="font-size: 1.25rem; font-weight: 700; color: #5AC4FF;">#5AC4FF</div>
          </div>
          <div style="flex: 1; min-width: 140px; border: 1px solid #6e63e8; padding: 1rem; border-radius: 8px; background: #f8f7ff;">
            <div style="font-size: 0.75rem; color: #6e63e8; text-transform: uppercase; font-weight: 600; margin-bottom: 0.5rem;">Cor Primary</div>
            <div style="font-size: 1.25rem; font-weight: 700; color: #6e63e8;">#6e63e8</div>
          </div>
        </div>
      </div>
    `
  })
};

export const Default = {
  name: 'Editar Aluno',
  render: () => {
    setTimeout(() => {
      // Close button
      const closeBtn = document.querySelector('.btn-close');
      if (closeBtn) {
        closeBtn.addEventListener('click', () => {
          alert('Modal fechado (emit cancel)');
        });
      }

      // Toggle password visibility
      const eyeIcons = document.querySelectorAll('.input-group-append');
      eyeIcons.forEach(icon => {
        icon.addEventListener('click', (e) => {
          const input = e.currentTarget.previousElementSibling;
          if (input.type === 'password') {
            input.type = 'text';
            e.currentTarget.querySelector('.material-symbols-outlined').textContent = 'visibility';
          } else {
            input.type = 'password';
            e.currentTarget.querySelector('.material-symbols-outlined').textContent = 'visibility_off';
          }
        });
      });

      // Mascot selection
      const mascotItems = document.querySelectorAll('.pet-container');
      const selectedAvatar = document.querySelector('.pet-img-selected-container');
      
      mascotItems.forEach(item => {
        item.addEventListener('click', () => {
          mascotItems.forEach(m => m.classList.remove('selected'));
          item.classList.add('selected');
          const mascotId = parseInt(item.dataset.mascot);
          selectedAvatar.innerHTML = mascotImages[mascotId];
        });
      });
    }, 100);

    return \`
      \` + styles + \`
      <div class="modal-backdrop"></div>
      <div class="modal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
              <h5 class="modal-title">Editar usu√°rio</h5>
              <button type="button" class="btn-close" aria-label="Close"></button>
            </div>

            <!-- Modal Body -->
            <div class="modal-body">
              <div class="edit-container">
                <!-- Avatar Section -->
                <div class="avatar-section">
                  <div class="pet-img-selected-container" style="background-color: #5AC4FF;">
                    ${mascotImages[7]}
                  </div>
                  
                  <div class="list-pets">
                    ${generateMascotGrid(7)}
                  </div>
                </div>

                <!-- Form Section -->
                <div class="form-section">
                  <div class="form-group">
                    <label class="form-label">Nome completo</label>
                    <input type="text" class="form-control" value="Fabio 2¬∫ Ano" disabled>
                  </div>

                  <div class="form-group">
                    <label class="form-label">Usu√°rio</label>
                    <input type="text" class="form-control" value="maria0983" disabled>
                  </div>

                  <div class="form-group">
                    <label class="form-label">Senha</label>
                    <div class="input-group">
                      <input type="password" class="form-control" value="abc123" placeholder="Digite sua senha">
                      <div class="input-group-append">
                        <span class="material-symbols-outlined">visibility_off</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Actions -->
              <div class="actions-container">
                <button class="btn btn-outline-danger">Cancelar</button>
                <button class="btn btn-primary">Salvar</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <p style="margin-top: 2rem; text-align: center; color: #6E6B7B; font-size: 0.857rem;">
        <strong>Contexto:</strong> Respons√°vel editando senha e mascote do filho "Fabio 2¬∫ Ano".<br>
        <strong>Intera√ß√£o:</strong> Clique nos mascotes para trocar, clique no olho para mostrar senha, X para fechar.
      </p>
    \`;
  }
};

export const Loading = {
  name: 'Carregando Dados',
  render: () => \`
    \` + styles + \`
    <div class="modal-backdrop"></div>
    <div class="modal" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content" style="position: relative;">
          <div class="overlay">
            <div class="spinner"></div>
          </div>
          
          <div class="modal-header">
            <h5 class="modal-title">Editar usu√°rio</h5>
            <button type="button" class="btn-close" aria-label="Close"></button>
          </div>

          <div class="modal-body" style="opacity: 0.3;">
            <div class="edit-container">
              <div class="avatar-section">
                <div class="pet-img-selected-container" style="background-color: #5AC4FF;"></div>
                
                <div class="list-pets">
                  ${generateMascotGrid(1)}
                </div>
              </div>

              <div class="form-section">
                <div class="form-group">
                  <label class="form-label">Nome completo</label>
                  <input type="text" class="form-control" disabled>
                </div>
                <div class="form-group">
                  <label class="form-label">Usu√°rio</label>
                  <input type="text" class="form-control" disabled>
                </div>
                <div class="form-group">
                  <label class="form-label">Senha</label>
                  <input type="password" class="form-control" disabled>
                </div>
              </div>
            </div>

            <div class="actions-container">
              <button class="btn btn-outline-danger" disabled>Cancelar</button>
              <button class="btn btn-primary" disabled>Salvar</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <p style="margin-top: 2rem; text-align: center; color: #6E6B7B; font-size: 0.857rem;">
      <strong>Estado:</strong> Buscando dados do aluno. Overlay com spinner.
    </p>
  `;
};

export const Saving = {
  name: 'Salvando Altera√ß√µes',
  render: () => `
    ${styles}
    <div class="modal-backdrop"></div>
    ${styles}
    <div class="modal-backdrop"></div>
    <div class="modal" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Editar usu√°rio</h5>
            <button type="button" class="btn-close" disabled style="opacity: 0.6;" aria-label="Close"></button>
          </div>

          <div class="modal-body">
            <div class="edit-container">
              <div class="avatar-section">
                <div class="pet-img-selected-container" style="background-color: #5AC4FF;">
                  ${mascotImages[3]}
                </div>
                
                <div class="list-pets">
                  ${generateMascotGrid(3)}
                </div>
              </div>

              <div class="form-section">
                <div class="form-group">
                  <label class="form-label">Nome completo</label>
                  <input type="text" class="form-control" value="Alice 5¬∫ Ano" disabled>
                </div>
                <div class="form-group">
                  <label class="form-label">Usu√°rio</label>
                  <input type="text" class="form-control" value="alice5234" disabled>
                </div>
                <div class="form-group">
                  <label class="form-label">Senha</label>
                  <div class="input-group">
                    <input type="text" class="form-control" value="senha123" disabled>
                    <div class="input-group-append" style="pointer-events: none; opacity: 0.6;">
                      <span class="material-symbols-outlined">visibility</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="actions-container">
              <button class="btn btn-outline-danger" disabled>Cancelar</button>
              <button class="btn btn-primary" disabled>
                <span class="spinner"></span>
                Salvar
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <p style="margin-top: 2rem; text-align: center; color: #6E6B7B; font-size: 0.857rem;">
      <strong>Estado:</strong> Salvando altera√ß√µes. Spinner no bot√£o + todos os campos disabled.
    </p>
  `
};

export const WithError = {
  name: 'Com Erro de Valida√ß√£o',
  render: () => `
    ${styles}
    <div class="modal-backdrop"></div>
    <div class="modal" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Editar usu√°rio</h5>
            <button type="button" class="btn-close" aria-label="Close"></button>
          </div>

          <div class="modal-body">
            <div class="edit-container">
              <div class="avatar-section">
                <div class="pet-img-selected-container" style="background-color: #5AC4FF;">
                  ${mascotImages[5]}
                </div>
                
                <div class="list-pets">
                  ${generateMascotGrid(5)}
                </div>
              </div>

              <div class="form-section">
                <div class="form-group">
                  <label class="form-label">Nome completo</label>
                  <input type="text" class="form-control" value="Maria 3¬∫ Ano" disabled>
                </div>
                <div class="form-group">
                  <label class="form-label">Usu√°rio</label>
                  <input type="text" class="form-control" value="maria8976" disabled>
                </div>
                <div class="form-group">
                  <label class="form-label">Senha</label>
                  <div class="input-group">
                    <input type="password" class="form-control" value="" placeholder="Digite sua senha" style="border-color: #EA5455;">
                    <div class="input-group-append" style="border-color: #EA5455;">
                      <span class="material-symbols-outlined">visibility_off</span>
                    </div>
                  </div>
                  <small class="text-danger">Senha √© obrigat√≥ria</small>
                </div>
              </div>
            </div>

            <div class="actions-container">
              <button class="btn btn-outline-danger">Cancelar</button>
              <button class="btn btn-primary" disabled>Salvar</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <p style="margin-top: 2rem; text-align: center; color: #6E6B7B; font-size: 0.857rem;">
      <strong>Estado:</strong> Campo senha vazio. Erro de valida√ß√£o exibido. Bot√£o Salvar disabled.
    </p>
  `
};

export const AllMascots = {
  name: 'Todos os Mascotes',
  render: () => `
    ${styles}
    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 2rem; padding: 2rem; max-width: 1200px; margin: 0 auto;">
      ${[1, 2, 3, 4, 5, 6, 7, 8].map(id => `
        <div class="modal-content" style="max-width: 250px;">
          <div class="avatar-section">
            <div class="pet-img-selected-container" style="background-color: #5AC4FF;">
              ${mascotImages[id]}
            </div>
            <p style="font-size: 0.857rem; font-weight: 600; color: #5E5873; text-align: center; margin-top: 0.5rem;">
              Corujinha ${id}
            </p>
          </div>
        </div>
      `).join('')}
    </div>
    
    <p style="margin-top: 2rem; text-align: center; color: #6E6B7B; font-size: 0.857rem;">
      <strong>Contexto:</strong> 8 corujinhas dispon√≠veis para sele√ß√£o. Cada aluno pode ter sua pr√≥pria.
    </p>
  `
};
